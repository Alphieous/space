<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="js/jquery-1.11.0.js"></script>



<title>Space Miner</title>
</head>

<body>
<a><img id="click" src="images/asteroid.png"></a>
</br>
<button id="buy_mining_barge">Buy a mining barge for 1</button>
</br>
<button id="buy_multiplier" title="Doubles the value of mining barges and manual clicks">Titanium Drill Bit - 50</button>

<div id="total_clicks">Clicks: 0</div>
<div id="clicks_per_second">Clicks per second: 0</div>
<div id="current_multiplier">Multiplier: 1</div>
</br>
<div id="total_mining_barges">Mining Barges: 0</div>
<div id="bought_upgrades">Upgrades: </div>

<script>
var total_clicks = 0; //increment this by one every click
var manual_clicks = 1; //value of manually clicking the asteroid

var multiplier = 1; // increases based on upgrades
var cps = 0; //the number of total clicks per second 
var upgrades = "Upgrades: ";  //purchased upgrades

//Mining Barge Variables
var miners = 0; //the number of mining barges purchased
var miner_cost = 1; //the cost of this should increase exponentially


//update the total number of clicks
function update_total_clicks() {
    var e = document.getElementById("total_clicks");
    e.innerHTML = 'Clicks: ' + total_clicks;
}

//update the amount of clicks per second
function update_cps()  {
	var e = document.getElementById("clicks_per_second");
	e.innerHTML = 'Clicks per second: ' + miners * multiplier;
}

//update the bought upgrades
function update_upgrades() 	{
	var e = document.getElementById("bought_upgrades");
	e.innerHTML = upgrades;
}

//add a click when the asteroid is manually clicked
document.getElementById("click").onclick =    function() {  

	total_clicks = total_clicks + (multiplier * manual_clicks);
    update_total_clicks(); //updates the text
};

//purchases 1 mining barge and updates all number fields accordingly while increasing cost of each
//additional barge exponentially
document.getElementById("buy_mining_barge").onclick =    function() {  
    if (total_clicks < miner_cost) {
        return alert('need more clicks.');
    }
    miners++; 
    total_clicks -= miner_cost;
    miner_cost = Math.pow(2, miners); 
    var e = document.getElementById("clicks_per_second");
    e.innerHTML = 'Clicks per second: ' + miners; 
    var e2 = document.getElementById("buy_mining_barge");
    e2.innerHTML = 'Buy a mining barge for ' + miner_cost;
	var e3 = document.getElementById("total_mining_barges");
	e3.innerHTML = "Mining barges: " + miners;
	
    update_total_clicks();
	update_cps();
};

//purchases the click multiplier, disabling the button
document.getElementById("buy_multiplier").onclick =    function() {  
	if (total_clicks < 50) {
		return alert('need more clicks.');
	}	
		
   var e = document.getElementById("current_multiplier");
   e.innerHTML = 'Multiplier: ' + multiplier * 2;
   multiplier++;
   document.getElementById("buy_multiplier").disabled = true;
   //miners = miners * multiplier;
   update_total_clicks();
   update_cps();
   total_clicks -= 50;
   upgrades += "Titanium Drill Bit";
   update_upgrades();

};

//updates text fields once per second
setInterval(function () {
    total_clicks += multiplier * miners;

	update_total_clicks();
	update_cps();
    
}, 1000); //once per second use the auto clickers
</script>

</body>
</html>
